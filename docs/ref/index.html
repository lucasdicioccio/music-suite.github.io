<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <meta http-equiv="Content-Style-Type" content="text/css" />
  <meta name="generator" content="pandoc" />
  <title>html - </title>
  <style type="text/css">code{white-space: pre;}</style>
  <style type="text/css">
table.sourceCode, tr.sourceCode, td.lineNumbers, td.sourceCode {
  margin: 0; padding: 0; vertical-align: baseline; border: none; }
table.sourceCode { width: 100%; line-height: 100%; }
td.lineNumbers { text-align: right; padding-right: 4px; padding-left: 4px; color: #aaaaaa; border-right: 1px solid #aaaaaa; }
td.sourceCode { padding-left: 5px; }
code > span.kw { color: #007020; font-weight: bold; }
code > span.dt { color: #902000; }
code > span.dv { color: #40a070; }
code > span.bn { color: #40a070; }
code > span.fl { color: #40a070; }
code > span.ch { color: #4070a0; }
code > span.st { color: #4070a0; }
code > span.co { color: #60a0b0; font-style: italic; }
code > span.ot { color: #007020; }
code > span.al { color: #ff0000; font-weight: bold; }
code > span.fu { color: #06287e; }
code > span.er { color: #ff0000; font-weight: bold; }
  </style>
  <link rel="stylesheet" href="styles.css" type="text/css" />
</head>
<body>
<div id="TOC">
<ul>
<li><a href="#the-music-suite">The Music Suite</a><ul>
<li><a href="#an-example">An example</a></li>
<li><a href="#input-and-output">Input and output</a></li>
<li><a href="#a-note-on-the-versioning">A note on the versioning</a></li>
<li><a href="#more-information">More information</a></li>
</ul></li>
<li><a href="#getting-started">Getting Started</a><ul>
<li><a href="#installing-the-suite">Installing the Suite</a></li>
<li><a href="#writing-music">Writing music</a><ul>
<li><a href="#with-music-files">With music files</a></li>
<li><a href="#with-haskell-files">With Haskell files</a></li>
</ul></li>
<li><a href="#time-and-duration">Time and duration</a></li>
<li><a href="#composition">Composition</a></li>
<li><a href="#pitch">Pitch</a><ul>
<li><a href="#pitch-names">Pitch names</a></li>
<li><a href="#interval-names">Interval names</a></li>
<li><a href="#qualified-pitch-and-interval-names">Qualified pitch and interval names</a></li>
</ul></li>
<li><a href="#dynamics">Dynamics</a></li>
<li><a href="#articulation">Articulation</a></li>
<li><a href="#parts">Parts</a></li>
<li><a href="#space">Space</a></li>
<li><a href="#tremolo">Tremolo</a></li>
<li><a href="#slides-and-glissando">Slides and glissando</a></li>
<li><a href="#harmonics">Harmonics</a></li>
<li><a href="#text">Text</a></li>
<li><a href="#chords">Chords</a></li>
<li><a href="#rests">Rests</a></li>
</ul></li>
<li><a href="#transformations">Transformations</a><ul>
<li><a href="#time">Time</a></li>
<li><a href="#onset-and-duration">Onset and duration</a></li>
<li><a href="#pitch-1">Pitch</a></li>
<li><a href="#pitches-and-intervals">Pitches and intervals</a></li>
<li><a href="#name-and-accidental">Name and accidental</a></li>
<li><a href="#spelling">Spelling</a></li>
<li><a href="#quality-and-number">Quality and number</a></li>
<li><a href="#intonation">Intonation</a></li>
<li><a href="#inspecting-dissonant-intervals">Inspecting dissonant intervals</a></li>
<li><a href="#semitones-and-enharmonic-equivalence">Semitones and enharmonic equivalence</a></li>
<li><a href="#spelling-1">Spelling</a></li>
<li><a href="#scales">Scales</a></li>
<li><a href="#chords-1">Chords</a></li>
<li><a href="#parts-1">Parts</a></li>
<li><a href="#instrument-part-and-sub-part">Instrument, part and sub-part</a></li>
<li><a href="#extracting-and-modifying-parts">Extracting and modifying parts</a></li>
<li><a href="#part-composition">Part composition</a></li>
</ul></li>
<li><a href="#time-based-structures">Time-based structures</a><ul>
<li><a href="#time-and-duration-1">Time and duration</a></li>
<li><a href="#spans">Spans</a></li>
<li><a href="#notes">Notes</a></li>
<li><a href="#voice">Voice</a></li>
<li><a href="#tracks">Tracks</a></li>
</ul></li>
<li><a href="#meta-information">Meta-information</a><ul>
<li><a href="#clefs">Clefs</a></li>
<li><a href="#time-signatures">Time signatures</a></li>
<li><a href="#key-signatures">Key signatures</a></li>
<li><a href="#rehearsal-marks">Rehearsal marks</a></li>
<li><a href="#miscellaneous">Miscellaneous</a></li>
</ul></li>
<li><a href="#import-and-export">Import and export</a><ul>
<li><a href="#midi">MIDI</a></li>
<li><a href="#lilypond">Lilypond</a></li>
<li><a href="#musicxml">MusicXML</a></li>
<li><a href="#abc-notation">ABC Notation</a></li>
<li><a href="#guido">Guido</a></li>
<li><a href="#vextab">Vextab</a></li>
<li><a href="#sibelius">Sibelius</a></li>
</ul></li>
<li><a href="#customizing-music-representation">Customizing music representation</a></li>
<li><a href="#examples">Examples</a><ul>
<li><a href="#counterpoint">Counterpoint</a></li>
<li><a href="#generative-music">Generative music</a><ul>
<li><a href="#duo">Duo</a></li>
</ul></li>
</ul></li>
<li><a href="#design-overview">Design overview</a><ul>
<li><a href="#compability-with-other-libraries">Compability with other libraries</a></li>
<li><a href="#acknowledgements">Acknowledgements</a></li>
</ul></li>
</ul>
</div>
<h2 id="the-music-suite"><a href="#the-music-suite">The Music Suite</a></h2>
<!--
> *Please note:* The API and docs are not particularly stable at the moment. An official release note will appear in due time.
-->

<p>The Music Suite is a language based on <a href="http://haskell.org">Haskell</a> for creating, processing or analyzing music. It can be used on its own or as a Haskell library.</p>
<p>The Music Suite is designed to:</p>
<ul>
<li>Describe what the music <em>is</em>, rather than how it is to be performed.</li>
<li>Avoid imposing stylistic or theoretical assumptions on the music.</li>
<li>Include common notation and theory as a <em>special case</em>.</li>
<li>Allow customization of the music representation.</li>
</ul>
<p>The Music Suite is both an <em>embedded</em> language and a Haskell library. Being embedded in Haskell has several advantages, it allow the developers to focus on the contents and the users to make use of any feature in the Haskell language.</p>
<p>The Music Suite uses several advanced language constructs internally and requires a relatively new Haskell compiler (see <a href="#installing-the-suite">Installing the Suite</a>).</p>
<h3 id="an-example"><a href="#an-example">An example</a></h3>
<p>To generate music we write an <em>expressions</em> such as this one:</p>
<div class='haskell-music'>



<div class="figure">
<img src="4ea6815a58473e70x.png" />
</div>
<pre class="sourceCode haskell"><code class="sourceCode haskell"><span class="kw">let</span>
    m <span class="fu">=</span> staccato (scat [c,d,e,c]<span class="fu">^/</span><span class="dv">2</span>) <span class="fu">|&gt;</span> ab <span class="fu">|&gt;</span> b_ <span class="fu">|&gt;</span> legato (d <span class="fu">|&gt;</span> c)<span class="fu">^*</span><span class="dv">2</span>
<span class="kw">in</span> stretch (<span class="dv">1</span><span class="fu">/</span><span class="dv">8</span>) m</code></pre>
</div>

<p>To transform music, we write a <em>function</em>. For example the following function halves all durations and transposes all pitches up a minor sixth:</p>
<pre class="sourceCode haskell"><code class="sourceCode haskell">up (minor sixth) <span class="fu">.</span> compress <span class="dv">2</span></code></pre>
<p>Applied to the above music we get:</p>
<div class="figure">
<img src="1dfd7766e2c33bbex.png" />
</div>
<h3 id="input-and-output"><a href="#input-and-output">Input and output</a></h3>
<p>The Music Suite works well with the following input and output formats:</p>
<ul>
<li>MusicXML</li>
<li>Lilypond</li>
<li>ABC notation</li>
<li>MIDI</li>
</ul>
<h3 id="a-note-on-the-versioning"><a href="#a-note-on-the-versioning">A note on the versioning</a></h3>
<p>The Music Suite consists of a group of packages released concurrently under a common <a href="http://semver.org/">semantic version number</a>. The library was deliberately released <em>prematurely</em> in order to encourage its creator to work on it more: we expect the first truly stable version to be <em>2.0</em>.</p>
<h3 id="more-information"><a href="#more-information">More information</a></h3>
<p>For a complete reference, see the <a href="/docs/api">reference documentation</a>.</p>
<!--
For an introduction, see [User Guide](User-Guide).
-->

<h1 id="getting-started"><a href="#getting-started">Getting Started</a></h1>
<h2 id="installing-the-suite"><a href="#installing-the-suite">Installing the Suite</a></h2>
<p>The Music Suite depends on the <a href="http://www.haskell.org/platform/">Haskell platform</a>.</p>
<p>While not strictly required, <a href="http://lilypond.org/">Lilypond</a> is highly recommended as it allow you to preview musical scores. See <a href="#import-and-export">Import and Export</a> for other formats.</p>
<p>To install the suite, simply install the Haskell platform, and then run:</p>
<pre><code>cabal install music-preludes</code></pre>
<h2 id="writing-music"><a href="#writing-music">Writing music</a></h2>
<p>This chapter will cover how to use the Music Suite to generate music. Later on we will cover how to <em>import</em> and <em>transform</em> music.</p>
<p>One of the main points of the Music Suite is to avoid committing to a <em>single</em>, closed music representation. Instead it provides a set of types and type constructors that can be used to construct an arbitrary representation of music.</p>
<p>Usually you will not want to invent a new representation from scratch, but rather start with a standard representation and customize it when needed. The default representation is defined in the <code>Music.Prelude.Basic</code> module, which is implicitly imported in all the examples below. See <a href="#customizing-music-representation">Customizing the Music Representation</a> for other examples.</p>
<h3 id="with-music-files"><a href="#with-music-files">With music files</a></h3>
<p>A piece of music is described by a <em>expressions</em> such as this one:</p>
<pre class="sourceCode haskell"><code class="sourceCode haskell">c <span class="fu">|&gt;</span> d <span class="fu">|&gt;</span> e</code></pre>
<p>The simplest way to render this expression is to save it in a file named <code>foo.music</code> (or similar) and convert it using <code>music2pdf foo.music</code>. This should render a file called <code>foo.pdf</code> containing the following:</p>
<div class="figure">
<img src="e812b3370beb65fx.png" />
</div>
<p>There are several programs for converting music expressions:</p>
<ul>
<li><code>music2mid</code></li>
<li><code>music2musicxml</code></li>
<li><code>music2ly</code></li>
<li><code>music2wav</code></li>
<li><code>music2pdf</code></li>
</ul>
<h3 id="with-haskell-files"><a href="#with-haskell-files">With Haskell files</a></h3>
<p>Alternatively, you can create a file called <code>test.hs</code> (or similar) with the following structure:</p>
<pre class="sourceCode haskell"><code class="sourceCode haskell"><span class="kw">import</span> Music.Prelude.Basic

main <span class="fu">=</span> defaultMain music
music <span class="fu">=</span> c <span class="fu">|&gt;</span> d <span class="fu">|&gt;</span> e</code></pre>
<p>Then either execute it using:</p>
<pre><code>$ runhaskell test.hs</code></pre>
<p>or compile and run it with</p>
<pre><code>$ ghc --make test
$ ./test</code></pre>
<p>In this case the resulting program will generate and open a file called <code>test.pdf</code> containing the output seen above.</p>
<p>Music files and Haskell files using <code>defaultMain</code> are equivalent in every aspect. In fact, the <code>music2...</code> programs are simple utilities that substitutes a single expression into a Haskell module such as the one above and executes the resulting main function.</p>
<h2 id="time-and-duration"><a href="#time-and-duration">Time and duration</a></h2>
<p>A single note can be entered by its name. This will render a note in the middle octave with a duration of one. Note that note values and durations correspond exactly, a duration of <code>1</code> is a whole note, a duration of <code>1/2</code> is a half note, and so on.</p>
<div class='haskell-music'>



<div class="figure">
<img src="344658b06e772a3ex.png" />
</div>
<pre class="sourceCode haskell"><code class="sourceCode haskell">c</code></pre>
</div>

<p>To change the duration of a note, use <a href="/docs/api/Music-Time-Stretchable.html#v:stretch"><code>stretch</code></a> or <a href="/docs/api/Music-Time-Stretchable.html#v:compress"><code>compress</code></a>. Note that:</p>
<pre class="sourceCode haskell"><code class="sourceCode haskell">compress x <span class="fu">=</span> stretch (<span class="dv">1</span><span class="fu">/</span>x)</code></pre>
<p>for all values of <em>x</em>.</p>
<div class='haskell-music'>



<div class="figure">
<img src="17acdbdbe31e8366x.png" />
</div>
<pre class="sourceCode haskell"><code class="sourceCode haskell">stretch (<span class="dv">1</span><span class="fu">/</span><span class="dv">2</span>) c</code></pre>
</div>

<div class='haskell-music'>



<div class="figure">
<img src="c206dd98257abc9x.png" />
</div>
<pre class="sourceCode haskell"><code class="sourceCode haskell">stretch <span class="dv">2</span> c         </code></pre>
</div>

<div class='haskell-music'>



<div class="figure">
<img src="47c74d92daacf31fx.png" />
</div>
<pre class="sourceCode haskell"><code class="sourceCode haskell">stretch (<span class="dv">4</span><span class="fu">+</span><span class="dv">1</span><span class="fu">/</span><span class="dv">2</span>) c</code></pre>
</div>

<p>TODO delay</p>
<p>Offset and duration is not limited to simple numbers. Here are some more complex examples:</p>
<div class='haskell-music'>



<div class="figure">
<img src="7989d1133a0ecb36x.png" />
</div>
<pre class="sourceCode haskell"><code class="sourceCode haskell">c<span class="fu">^*</span>(<span class="dv">9</span><span class="fu">/</span><span class="dv">8</span>) <span class="fu">|&gt;</span> d<span class="fu">^*</span>(<span class="dv">7</span><span class="fu">/</span><span class="dv">8</span>)</code></pre>
</div>

<div class='haskell-music'>



<div class="figure">
<img src="4247fd44e823a93fx.png" />
</div>
<pre class="sourceCode haskell"><code class="sourceCode haskell">stretch (<span class="dv">2</span><span class="fu">/</span><span class="dv">3</span>) (scat [c,d,e]) <span class="fu">|&gt;</span> f<span class="fu">^*</span><span class="dv">2</span></code></pre>
</div>

<p>As you can see, note values, tuplets and ties are added automatically</p>
<p>The <code>^*</code> and <code>^/</code> operators can be used as shorthands for <code>delay</code> and <code>compress</code>.</p>
<div class='haskell-music'>



<div class="figure">
<img src="6e082ce15a9e3be5x.png" />
</div>
<pre class="sourceCode haskell"><code class="sourceCode haskell">(c <span class="fu">|&gt;</span> d <span class="fu">|&gt;</span> e <span class="fu">|&gt;</span> c <span class="fu">|&gt;</span> d<span class="fu">^*</span><span class="dv">2</span> <span class="fu">|&gt;</span> d<span class="fu">^*</span><span class="dv">2</span>)<span class="fu">^/</span><span class="dv">16</span></code></pre>
</div>


<p>Allthough the actual types are more general, you can think of <code>c</code> as an expression of type <code>Score Note</code>, and the transformations as functions <code>Score Note -&gt; Score Note</code>.</p>
<div class='haskell-music'>



<div class="figure">
<img src="72259aeb0502b2ebx.png" />
</div>
<pre class="sourceCode haskell"><code class="sourceCode haskell">up (perfect octave) <span class="fu">.</span> compress <span class="dv">2</span> <span class="fu">.</span> delay <span class="dv">3</span> <span class="fu">$</span> c</code></pre>
</div>


<h2 id="composition"><a href="#composition">Composition</a></h2>
<p>Music expressions can be composed <a href="/docs/api/Music-Pitch.html#v:-60--62-"><code>&lt;&gt;</code></a>:</p>
<div class='haskell-music'>



<div class="figure">
<img src="2417d7f318b299eex.png" />
</div>
<pre class="sourceCode haskell"><code class="sourceCode haskell">c <span class="fu">&lt;&gt;</span> e <span class="fu">&lt;&gt;</span> g</code></pre>
</div>

<p>TODO fundamentally, <code>&lt;&gt;</code> is the only way to compose music...</p>
<p>Or in sequence using <a href="/docs/api/Music-Time-Juxtapose.html#v:-124--62-"><code>|&gt;</code></a>:</p>
<div class='haskell-music'>



<div class="figure">
<img src="e812b3370beb65fx.png" />
</div>
<pre class="sourceCode haskell"><code class="sourceCode haskell">c <span class="fu">|&gt;</span> d <span class="fu">|&gt;</span> e</code></pre>
</div>

<p>Or partwise using <a href="/docs/api/Music-Score-Combinators.html#v:-60--47--62-"><code>&lt;/&gt;</code></a>:</p>
<div class='haskell-music'>



<div class="figure">
<img src="59dcbb2937c2906cx.png" />
</div>
<pre class="sourceCode haskell"><code class="sourceCode haskell">c <span class="fu">&lt;/&gt;</span> e <span class="fu">&lt;/&gt;</span> g</code></pre>
</div>

<p>Here is a more complex example:</p>
<div class='haskell-music'>



<div class="figure">
<img src="28c98e09d9084e17x.png" />
</div>
<pre class="sourceCode haskell"><code class="sourceCode haskell"><span class="kw">let</span>            
    scale <span class="fu">=</span> scat [c,d,e,f,g,a,g,f]<span class="fu">^/</span><span class="dv">8</span>
    triad a <span class="fu">=</span> a <span class="fu">&lt;&gt;</span> up _<span class="dt">M3</span> a <span class="fu">&lt;&gt;</span> up _<span class="dt">P5</span> a
<span class="kw">in</span> up _<span class="dt">P8</span> scale <span class="fu">&lt;/&gt;</span> (triad c)<span class="fu">^/</span><span class="dv">2</span> <span class="fu">|&gt;</span> (triad g_)<span class="fu">^/</span><span class="dv">2</span></code></pre>
</div>

<p>As a shorthand for <code>x |&gt; y |&gt; z ..</code>, we can write <a href="/docs/api/Music-Time-Juxtapose.html#v:scat"><code>scat</code></a> <code>[x, y, z]</code> (short for <em>sequential concatenation</em>).</p>
<div class='haskell-music'>



<div class="figure">
<img src="8dcc23c8a43be98x.png" />
</div>
<pre class="sourceCode haskell"><code class="sourceCode haskell">scat [c,e<span class="fu">..</span>g]<span class="fu">^/</span><span class="dv">4</span></code></pre>
</div>

<p>For <code>x &lt;&gt; y &lt;&gt; z ..</code>, we can write <a href="/docs/api/Music-Time-Juxtapose.html#v:pcat"><code>pcat</code></a> <code>[x, y, z]</code> (short for <em>parallel concatenation</em>).</p>
<div class='haskell-music'>



<div class="figure">
<img src="1a42f3fa65506151x.png" />
</div>
<pre class="sourceCode haskell"><code class="sourceCode haskell">pcat [c,e<span class="fu">..</span>g]<span class="fu">^/</span><span class="dv">2</span></code></pre>
</div>

<p>Actually, <a href="/docs/api/Music-Time-Juxtapose.html#v:scat"><code>scat</code></a> and <a href="/docs/api/Music-Time-Juxtapose.html#v:pcat"><code>pcat</code></a> used to be called <code>melody</code> and <code>chord</code> back in the days, but I figured out that these are names that you actually want to use in your own code.</p>
<h2 id="pitch"><a href="#pitch">Pitch</a></h2>
<h3 id="pitch-names"><a href="#pitch-names">Pitch names</a></h3>
<p>To facilitate the use of non-standard pitch, the standard pitch names are provided as overloaded values, referred to as <em>pitch literals</em>.</p>
<p>To understand how this works, think about the type of numeric literal. The values <span class="math">0, 1, 2</span> etc. have type <code>Num a =&gt; a</code>, similarly, the pitch literals <span class="math"><em>c</em>, <em>d</em>, <em>e</em>, <em>f</em>. . . </span> have type <a href="/docs/api/Music-Pitch-Literal-Pitch.html#t:IsPitch"><code>IsPitch</code></a> <code>a =&gt; a</code>.</p>
<p>For Western-style pitch types, the standard pitch names can be used:</p>
<div class='haskell-music'>



<div class="figure">
<img src="6cfe439b3533d41ax.png" />
</div>
<pre class="sourceCode haskell"><code class="sourceCode haskell">scat [c, d, e, f, g, a, b]</code></pre>
</div>

<p>Pitch names in other languages work as well, for example <code>ut, do, re, mi, fa, so, la, ti, si</code>.</p>
<!--
German names (using `h` and `b` instead of `b` and `bb`) can be approximated as follows:

```haskell
import Music.Preludes.Basic hiding (b)
import qualified Music.Pitch.Literal as P

h = P.b
b = P.bb

```
-->


<p>You can change octave using <code>octavesUp</code> and <code>octavesDown</code>:</p>
<div class='haskell-music'>



<div class="figure">
<img src="5ee112ca5880e24ax.png" />
</div>
<pre class="sourceCode haskell"><code class="sourceCode haskell">octavesUp <span class="dv">4</span> c
    <span class="fu">&lt;/&gt;</span>
octavesUp (<span class="fu">-</span><span class="dv">1</span>) c
    <span class="fu">&lt;/&gt;</span>
octavesDown <span class="dv">2</span> c</code></pre>
</div>

<p>There is also a shorthand for other octaves:</p>
<div class='haskell-music'>



<div class="figure">
<img src="762a2558558e6d28x.png" />
</div>
<pre class="sourceCode haskell"><code class="sourceCode haskell">c__ <span class="fu">|&gt;</span> c_ <span class="fu">|&gt;</span> c <span class="fu">|&gt;</span> c&#39; <span class="fu">|&gt;</span> c&#39;&#39;</code></pre>
</div>

<p>Sharps and flats can be added by the functions <a href="/docs/api/Music-Pitch-Common-Accidental.html#v:sharp"><code>sharp</code></a> and <a href="/docs/api/Music-Pitch-Common-Accidental.html#v:flat"><code>flat</code></a>, which are written <em>postfix</em> thanks to some overloading magic.</p>
<div class='haskell-music'>



<div class="figure">
<img src="7d4cbd690475a6c8x.png" />
</div>
<pre class="sourceCode haskell"><code class="sourceCode haskell">c sharp <span class="fu">|&gt;</span> d <span class="fu">|&gt;</span> e flat</code></pre>
</div>

<p>You can also use the ordinary (prefix) versions <code>sharpen</code> and <code>flatten</code>.</p>
<div class='haskell-music'>



<div class="figure">
<img src="1101f1aee219368ex.png" />
</div>
<pre class="sourceCode haskell"><code class="sourceCode haskell">sharpen c 
    <span class="fu">&lt;/&gt;</span> 
(sharpen <span class="fu">.</span> sharpen) c</code></pre>
</div>

<p>As you might expect, there is also a shorthand for sharp and flat notes:</p>
<div class='haskell-music'>



<div class="figure">
<img src="2fb5ed23f747e89cx.png" />
</div>
<pre class="sourceCode haskell"><code class="sourceCode haskell">(cs <span class="fu">|&gt;</span> ds <span class="fu">|&gt;</span> es)    <span class="co">-- sharp</span>
    <span class="fu">&lt;/&gt;</span>
(cb <span class="fu">|&gt;</span> db <span class="fu">|&gt;</span> eb)    <span class="co">-- flat</span></code></pre>
</div>

<p>Here is an overview of all pitch notations:</p>
<pre class="sourceCode haskell"><code class="sourceCode haskell">sharpen c             <span class="fu">==</span> c sharp       <span class="fu">==</span> cs
flatten d             <span class="fu">==</span> d flat        <span class="fu">==</span> ds
(sharpen <span class="fu">.</span> sharpen) c <span class="fu">==</span> c doubleSharp <span class="fu">==</span> css
(flatten <span class="fu">.</span> flatten) d <span class="fu">==</span> d doubleFlat  <span class="fu">==</span> dss</code></pre>
<p>Note that <code>cs == db</code> may or may not hold depending on which pitch representation you use.</p>
<h3 id="interval-names"><a href="#interval-names">Interval names</a></h3>
<p>Interval names are overloaded in a manner similar to pitches, and are consequently referred to as <em>interval literals</em>. The corresponding class is called <a href="/docs/api/Music-Pitch-Literal-Interval.html#t:IsInterval"><code>IsInterval</code></a>.</p>
<p>Here and elsewhere in the Music Suite, the convention is to follow standard theoretical notation, so <em>minor</em> and <em>diminished</em> intervals are written in lower-case, while <em>major</em> and <em>perfect</em> intervals are written in upper-case. Unfortunately, Haskell does not support overloaded upper-case values, so we have to adopt an underscore prefix:</p>
<pre class="sourceCode haskell"><code class="sourceCode haskell">minor third      <span class="fu">==</span> m3
major third      <span class="fu">==</span> _<span class="dt">M3</span>
perfect fifth    <span class="fu">==</span> _<span class="dt">P5</span>
diminished fifth <span class="fu">==</span> d5
minor ninth      <span class="fu">==</span> m9</code></pre>
<p>Similar to <a href="/docs/api/Music-Pitch-Alterable.html#v:sharpen"><code>sharpen</code></a> and <a href="/docs/api/Music-Pitch-Alterable.html#v:flatten"><code>flatten</code></a>, the <a href="/docs/api/Music-Pitch-Augmentable.html#v:augment"><code>augment</code></a> and <a href="/docs/api/Music-Pitch-Augmentable.html#v:diminish"><code>diminish</code></a> functions can be used to alter the size of an interval. For example:</p>
<div class='haskell-music'>



<div class="figure">
<img src="72c9aad78038ac0cx.png" />
</div>
<pre class="sourceCode haskell"><code class="sourceCode haskell"><span class="kw">let</span>
    intervals <span class="fu">=</span> [diminish (perfect fifth), (diminish <span class="fu">.</span> diminish) (perfect fifth)]
<span class="kw">in</span> scat <span class="fu">$</span> <span class="fu">fmap</span> (<span class="ot">`up`</span> c) intervals</code></pre>
</div>

<p>You can add pitches and intervals using the <a href="/docs/api/Music-Pitch.html#v:-46--45--46-"><code>.-.</code></a> and <a href="/docs/api/Music-Pitch.html#v:-46--43--94-"><code>.+^</code></a> operators. To memorize these operators, think of pitches and points <code>.</code> and intervals as vectors <code>^</code>.</p>
<div class='haskell-music'>



<div class="figure">
<img src="43d6c0b4d2b8d1b0x.png" />
</div>
<pre class="sourceCode haskell"><code class="sourceCode haskell">setPitch (c <span class="fu">.+^</span> m3) <span class="fu">$</span> <span class="fu">return</span> c_</code></pre>
</div>


<h3 id="qualified-pitch-and-interval-names"><a href="#qualified-pitch-and-interval-names">Qualified pitch and interval names</a></h3>
<p>There is nothing special about the pitch and interval literals, they are simply values exported by the <code>Music.Pitch.Literal</code> module. While this module is reexported by the standard music preludes, you can also import it qualified if you want to avoid bringing the single-letter pitch names into scope.</p>
<pre class="sourceCode haskell"><code class="sourceCode haskell">Pitch.c <span class="fu">|&gt;</span> Pitch.d <span class="fu">.+^</span> Interval.m3</code></pre>
<p>TODO overloading, explain why the following works:</p>
<pre class="sourceCode haskell"><code class="sourceCode haskell"><span class="fu">return</span> (<span class="ot">c::</span><span class="dt">Note</span>) <span class="fu">==</span> (<span class="ot">c::</span><span class="dt">Score</span> <span class="dt">Note</span>)</code></pre>
<h2 id="dynamics"><a href="#dynamics">Dynamics</a></h2>
<p>Dynamic values are overloaded in the same way as pitches. The dynamic literals are defined in <code>Music.Dynamics.Literal</code> and have type <code>IsDynamics a =&gt; a</code>.</p>
<p>An overview of the dynamic values:</p>
<div class='haskell-music'>



<div class="figure">
<img src="73dd0a315ca1480x.png" />
</div>
<pre class="sourceCode haskell"><code class="sourceCode haskell">scat <span class="fu">$</span> <span class="fu">zipWith</span> dynamics [fff,ff,_f,mf,mp,_p,pp,ppp] [c<span class="fu">..</span>]</code></pre>
</div>

<p>TODO other ways of applying dynamics</p>
<h2 id="articulation"><a href="#articulation">Articulation</a></h2>
<p>Some basic articulation functions are <a href="/docs/api/Music-Score-Articulation.html#v:legato"><code>legato</code></a>, <a href="/docs/api/Music-Score-Articulation.html#v:staccato"><code>staccato</code></a>, <a href="/docs/api/Music-Score-Articulation.html#v:portato"><code>portato</code></a>, <a href="/docs/api/Music-Score-Articulation.html#v:tenuto"><code>tenuto</code></a>, <a href="/docs/api/Music-Score-Articulation.html#v:separated"><code>separated</code></a>, <a href="/docs/api/Music-Score-Articulation.html#v:spiccato"><code>spiccato</code></a>:</p>
<div class='haskell-music'>



<div class="figure">
<img src="4e0bf333c3a1253bx.png" />
</div>
<pre class="sourceCode haskell"><code class="sourceCode haskell">legato (scat [c<span class="fu">..</span>g]<span class="fu">^/</span><span class="dv">8</span>)
    <span class="fu">&lt;/&gt;</span>
staccato (scat [c<span class="fu">..</span>g]<span class="fu">^/</span><span class="dv">8</span>)
    <span class="fu">&lt;/&gt;</span>
portato (scat [c<span class="fu">..</span>g]<span class="fu">^/</span><span class="dv">8</span>)
    <span class="fu">&lt;/&gt;</span>
tenuto (scat [c<span class="fu">..</span>g]<span class="fu">^/</span><span class="dv">8</span>)
    <span class="fu">&lt;/&gt;</span>
separated (scat [c<span class="fu">..</span>g]<span class="fu">^/</span><span class="dv">8</span>)
    <span class="fu">&lt;/&gt;</span>
spiccato (scat [c<span class="fu">..</span>g]<span class="fu">^/</span><span class="dv">8</span>)</code></pre>
</div>

<p><a href="/docs/api/Music-Score-Articulation.html#v:accent"><code>accent</code></a> <a href="/docs/api/Music-Score-Articulation.html#v:marcato"><code>marcato</code></a></p>
<div class='haskell-music'>



<div class="figure">
<img src="7505c58579d6f2ebx.png" />
</div>
<pre class="sourceCode haskell"><code class="sourceCode haskell">accent (scat [c<span class="fu">..</span>g]<span class="fu">^/</span><span class="dv">8</span>)
    <span class="fu">&lt;/&gt;</span>
marcato (scat [c<span class="fu">..</span>g]<span class="fu">^/</span><span class="dv">8</span>)</code></pre>
</div>

<p><a href="/docs/api/Music-Score-Articulation.html#v:accentLast"><code>accentLast</code></a> <a href="/docs/api/Music-Score-Articulation.html#v:accentAll"><code>accentAll</code></a></p>
<div class='haskell-music'>



<div class="figure">
<img src="222067bf4985543dx.png" />
</div>
<pre class="sourceCode haskell"><code class="sourceCode haskell">accentLast (scat [c<span class="fu">..</span>g]<span class="fu">^/</span><span class="dv">8</span>)
    <span class="fu">&lt;/&gt;</span>
accentAll (scat [c<span class="fu">..</span>g]<span class="fu">^/</span><span class="dv">8</span>)</code></pre>
</div>

<p>Applying articulations over multiple parts:</p>
<div class='haskell-music'>



<div class="figure">
<img src="6d6121cf5a1057ffx.png" />
</div>
<pre class="sourceCode haskell"><code class="sourceCode haskell"><span class="kw">let</span>
    p1 <span class="fu">=</span> scat [c<span class="fu">..</span>c&#39;]<span class="fu">^/</span><span class="dv">4</span>
    p2 <span class="fu">=</span> delay (<span class="dv">1</span><span class="fu">/</span><span class="dv">4</span>) <span class="fu">$</span> scat [c<span class="fu">..</span>c&#39;]<span class="fu">^/</span><span class="dv">4</span>
    p3 <span class="fu">=</span> delay (<span class="dv">3</span><span class="fu">/</span><span class="dv">4</span>) <span class="fu">$</span> scat [c<span class="fu">..</span>c&#39;]<span class="fu">^/</span><span class="dv">4</span>
<span class="kw">in</span> (accent <span class="fu">.</span> legato) (p1 <span class="fu">&lt;/&gt;</span> p2 <span class="fu">&lt;/&gt;</span> p3)</code></pre>
</div>

<h2 id="parts"><a href="#parts">Parts</a></h2>
<p>TODO</p>
<h2 id="space"><a href="#space">Space</a></h2>
<p>TODO</p>
<h2 id="tremolo"><a href="#tremolo">Tremolo</a></h2>
<p><a href="/docs/api/Music-Score-Ornaments.html#v:tremolo"><code>tremolo</code></a></p>
<div class='haskell-music'>



<div class="figure">
<img src="33035e5b50c27efax.png" />
</div>
<pre class="sourceCode haskell"><code class="sourceCode haskell">tremolo <span class="dv">2</span> <span class="fu">$</span> times <span class="dv">2</span> <span class="fu">$</span> (c <span class="fu">|&gt;</span> d)<span class="fu">^/</span><span class="dv">2</span></code></pre>
</div>

<h2 id="slides-and-glissando"><a href="#slides-and-glissando">Slides and glissando</a></h2>
<p><a href="/docs/api/Music-Score-Ornaments.html#v:slide"><code>slide</code></a> <a href="/docs/api/Music-Score-Ornaments.html#v:glissando"><code>glissando</code></a></p>
<div class='haskell-music'>



<div class="figure">
<img src="455023b9c80482a0x.png" />
</div>
<pre class="sourceCode haskell"><code class="sourceCode haskell">glissando <span class="fu">$</span> scat [c,d]<span class="fu">^/</span><span class="dv">2</span></code></pre>
</div>

<h2 id="harmonics"><a href="#harmonics">Harmonics</a></h2>
<p>Use the <a href="/docs/api/Music-Score-Ornaments.html#v:harmonic"><code>harmonic</code></a> function:</p>
<div class='haskell-music'>



<div class="figure">
<img src="3577bdcff02045ddx.png" />
</div>
<pre class="sourceCode haskell"><code class="sourceCode haskell">(harmonic <span class="dv">1</span> <span class="fu">$</span> c<span class="fu">^/</span><span class="dv">2</span>)
    <span class="fu">&lt;/&gt;</span>
(harmonic <span class="dv">2</span> <span class="fu">$</span> c<span class="fu">^/</span><span class="dv">2</span>)
    <span class="fu">&lt;/&gt;</span>
(harmonic <span class="dv">3</span> <span class="fu">$</span> c<span class="fu">^/</span><span class="dv">2</span>)</code></pre>
</div>
<p><a href="/docs/api/Music-Score-Ornaments.html#v:artificial"><code>artificial</code></a></p>
<h2 id="text"><a href="#text">Text</a></h2>
<p><a href="/docs/api/Music-Score-Ornaments.html#v:text"><code>text</code></a></p>
<div class='haskell-music'>



<div class="figure">
<img src="5351da121c9bf05dx.png" />
</div>
<pre class="sourceCode haskell"><code class="sourceCode haskell">text <span class="st">&quot;pizz.&quot;</span> <span class="fu">$</span> c<span class="fu">^/</span><span class="dv">2</span></code></pre>
</div>
<h2 id="chords"><a href="#chords">Chords</a></h2>
<p>TODO</p>
<h2 id="rests"><a href="#rests">Rests</a></h2>
<p>Sometimes it is useful to work with scores that have a duration but no events. This kind of score is represented by <code>rest</code> and has the type <code>Score (Maybe Note)</code>. We use <a href="/docs/api/Music-Score-Combinators.html#v:removeRests"><code>removeRests</code></a> to convert a <code>Score (Maybe a)</code> into a <code>Score a</code>.</p>
<div class='haskell-music'>



<div class="figure">
<img src="655bf6c96f41cdbfx.png" />
</div>
<pre class="sourceCode haskell"><code class="sourceCode haskell">removeRests <span class="fu">$</span> times <span class="dv">4</span> (accent g<span class="fu">^*</span><span class="dv">2</span> <span class="fu">|&gt;</span> rest <span class="fu">|&gt;</span> scat [d,d]<span class="fu">^/</span><span class="dv">2</span>)<span class="fu">^/</span><span class="dv">8</span></code></pre>
</div>
                 



<h1 id="transformations"><a href="#transformations">Transformations</a></h1>
<h2 id="time"><a href="#time">Time</a></h2>
<p><a href="/docs/api/Music-Time-Reverse.html#v:rev"><code>rev</code></a></p>
<div class='haskell-music'>



<div class="figure">
<img src="40e9ac5d562b8c56x.png" />
</div>
<pre class="sourceCode haskell"><code class="sourceCode haskell"><span class="kw">let</span>
    melody <span class="fu">=</span> legato <span class="fu">$</span> scat [d, scat [g,fs]<span class="fu">^/</span><span class="dv">2</span>,bb<span class="fu">^*</span><span class="dv">2</span>]<span class="fu">^/</span><span class="dv">4</span>
<span class="kw">in</span> melody <span class="fu">|&gt;</span> melody</code></pre>
</div>

<p><a href="/docs/api/Music-Time-Juxtapose.html#v:times"><code>times</code></a></p>
<div class='haskell-music'>



<div class="figure">
<img src="701c5015f33304a4x.png" />
</div>
<pre class="sourceCode haskell"><code class="sourceCode haskell"><span class="kw">let</span>
    melody <span class="fu">=</span> legato <span class="fu">$</span> scat [c,d,e,c]<span class="fu">^/</span><span class="dv">16</span>
<span class="kw">in</span> times <span class="dv">4</span> <span class="fu">$</span> melody</code></pre>
</div>

<p><a href="/docs/api/Music-Time-Juxtapose.html#v:sustain"><code>sustain</code></a></p>
<div class='haskell-music'>



<div class="figure">
<img src="60dc3260048dae39x.png" />
</div>
<pre class="sourceCode haskell"><code class="sourceCode haskell">scat [e,d,f,e] <span class="fu">&lt;&gt;</span> c</code></pre>
</div>


<p><a href="/docs/api/Music-Time-Juxtapose.html#v:anticipate"><code>anticipate</code></a></p>
<p><a href="/docs/api/Music-Time-Juxtapose.html#v:repeated"><code>repeated</code></a></p>
<div class='haskell-music'>



<div class="figure">
<img src="209d91caa25c1affx.png" />
</div>
<pre class="sourceCode haskell"><code class="sourceCode haskell"><span class="kw">let</span> 
    m <span class="fu">=</span> legato <span class="fu">$</span> scat [c,d,scat [e,d]<span class="fu">^/</span><span class="dv">2</span>, c]<span class="fu">^/</span><span class="dv">4</span> 
<span class="kw">in</span> [c,eb,ab,g] <span class="ot">`repeated`</span> (\p <span class="ot">-&gt;</span> up (asPitch p <span class="fu">.-.</span> c) m)</code></pre>
</div>

<h2 id="onset-and-duration"><a href="#onset-and-duration">Onset and duration</a></h2>
<div class='haskell-music'>



<div class="figure">
<img src="6f4bfbf5a4d6c76ax.png" />
</div>
<pre class="sourceCode haskell"><code class="sourceCode haskell"><span class="kw">let</span>                
    melody <span class="fu">=</span> asScore <span class="fu">$</span> legato <span class="fu">$</span> scat [scat [c,d,e,c], scat [e,f], g<span class="fu">^*</span><span class="dv">2</span>]
    pedal  <span class="fu">=</span> asScore <span class="fu">$</span> delayTime (onset melody) <span class="fu">$</span> stretch (duration melody) <span class="fu">$</span> c_
<span class="kw">in</span> compress <span class="dv">4</span> <span class="fu">$</span> melody <span class="fu">&lt;/&gt;</span> pedal</code></pre>
</div>

<h2 id="pitch-1"><a href="#pitch-1">Pitch</a></h2>
<p><a href="/docs/api/Music-Score-Pitch.html#v:invertAround"><code>invertAround</code></a></p>
<div class='haskell-music'>



<div class="figure">
<img src="bd806eefa75df64x.png" />
</div>
<pre class="sourceCode haskell"><code class="sourceCode haskell">(scat [c<span class="fu">..</span>g]<span class="fu">^*</span>(<span class="dv">2</span><span class="fu">/</span><span class="dv">5</span>))
    <span class="fu">&lt;/&gt;</span>
(invertAround c <span class="fu">$</span> scat [c<span class="fu">..</span>g]<span class="fu">^*</span>(<span class="dv">2</span><span class="fu">/</span><span class="dv">5</span>))
    <span class="fu">&lt;/&gt;</span>
(invertAround e <span class="fu">$</span> scat [c<span class="fu">..</span>g]<span class="fu">^*</span>(<span class="dv">2</span><span class="fu">/</span><span class="dv">5</span>))</code></pre>
</div>


<h2 id="pitches-and-intervals"><a href="#pitches-and-intervals">Pitches and intervals</a></h2>
<h2 id="name-and-accidental"><a href="#name-and-accidental">Name and accidental</a></h2>
<h2 id="spelling"><a href="#spelling">Spelling</a></h2>
<h2 id="quality-and-number"><a href="#quality-and-number">Quality and number</a></h2>
<h2 id="intonation"><a href="#intonation">Intonation</a></h2>
<p>TODO</p>
<h2 id="inspecting-dissonant-intervals"><a href="#inspecting-dissonant-intervals">Inspecting dissonant intervals</a></h2>
<h2 id="semitones-and-enharmonic-equivalence"><a href="#semitones-and-enharmonic-equivalence">Semitones and enharmonic equivalence</a></h2>
<h2 id="spelling-1"><a href="#spelling-1">Spelling</a></h2>
<h2 id="scales"><a href="#scales">Scales</a></h2>
<h2 id="chords-1"><a href="#chords-1">Chords</a></h2>
<h2 id="parts-1"><a href="#parts-1">Parts</a></h2>
<h2 id="instrument-part-and-sub-part"><a href="#instrument-part-and-sub-part">Instrument, part and sub-part</a></h2>
<h2 id="extracting-and-modifying-parts"><a href="#extracting-and-modifying-parts">Extracting and modifying parts</a></h2>
<h2 id="part-composition"><a href="#part-composition">Part composition</a></h2>
<h1 id="time-based-structures"><a href="#time-based-structures">Time-based structures</a></h1>
<p><a href="/docs/api/Music-Score-Score.html#t:Score"><code>Score</code></a> <a href="/docs/api/Music-Score-Voice.html#t:Voice"><code>Voice</code></a> <a href="/docs/api/Music-Score-Track.html#t:Track"><code>Track</code></a> <a href="/docs/api/Music-Time-Delayable.html#t:Delayable"><code>Delayable</code></a> <a href="/docs/api/Music-Time-Stretchable.html#t:Stretchable"><code>Stretchable</code></a></p>
<h2 id="time-and-duration-1"><a href="#time-and-duration-1">Time and duration</a></h2>
<p>TODO</p>
<h2 id="spans"><a href="#spans">Spans</a></h2>
<p>TODO</p>
<h2 id="notes"><a href="#notes">Notes</a></h2>
<p>TODO</p>
<h2 id="voice"><a href="#voice">Voice</a></h2>
<p>A <a href="/docs/api/Music-Score-Voice.html#t:Voice"><code>Voice</code></a> represents a single voice of music. It consists of a sequence of values with duration, but no time.</p>
<p>It can be converted into a score by stretching each element and composing in sequence.</p>
<div class='haskell-music'>



<div class="figure">
<img src="28277393e1e71d7x.png" />
</div>
<pre class="sourceCode haskell"><code class="sourceCode haskell"><span class="kw">let</span>
    x,<span class="ot"> y ::</span> <span class="dt">Voice</span> <span class="dt">Note</span>

    x <span class="fu">=</span> voice [ (<span class="dv">1</span>, c),
                (<span class="dv">1</span>, d),
                (<span class="dv">1</span>, f),
                (<span class="dv">1</span>, e) ]

    y <span class="fu">=</span> join <span class="fu">$</span> voice [ (<span class="dv">1</span>, x), 
                       (<span class="dv">0</span><span class="fu">.</span><span class="dv">5</span>, up _<span class="dt">P5</span> x), 
                       (<span class="dv">4</span>, up _<span class="dt">P8</span> x) ]

<span class="kw">in</span> stretch (<span class="dv">1</span><span class="fu">/</span><span class="dv">8</span>) <span class="fu">$</span> voiceToScore <span class="fu">$</span> y</code></pre>
</div>

<h2 id="tracks"><a href="#tracks">Tracks</a></h2>
<p>A <a href="/docs/api/Music-Score-Track.html#t:Track"><code>Track</code></a> is similar to a score, except that it events have no offset or duration. It is useful for representing point-wise occurrences such as samples, cues or percussion notes.</p>
<p>It can be converted into a score by delaying each element and composing in parallel. An explicit duration has to be provided.</p>
<div class='haskell-music'>



<div class="figure">
<img src="27394e353aafbec4x.png" />
</div>
<pre class="sourceCode haskell"><code class="sourceCode haskell"><span class="kw">let</span>
    x,<span class="ot"> y ::</span> <span class="dt">Track</span> <span class="dt">Note</span>

    x <span class="fu">=</span> track [ (<span class="dv">0</span>, c), 
                (<span class="dv">1</span>, d), 
                (<span class="dv">2</span>, e) ]

    y <span class="fu">=</span> join <span class="fu">$</span> track [ (<span class="dv">0</span>, x), 
                       (<span class="dv">1</span><span class="fu">.</span><span class="dv">5</span>,  up _<span class="dt">P5</span> x), 
                       (<span class="dv">3</span><span class="fu">.</span><span class="dv">25</span>, up _<span class="dt">P8</span> x) ]

<span class="kw">in</span> trackToScore (<span class="dv">1</span><span class="fu">/</span><span class="dv">8</span>) y</code></pre>
</div>


<h1 id="meta-information"><a href="#meta-information">Meta-information</a></h1>
<p>It is often desirable to annotate music with extraneous information, such as title, creator, time signature and so on. In the Music Suite these are grouped together under the common label <em>meta-information</em>.</p>
<p>The distinction between ordinary musical data and meta-data is not always clear cut. For example, while a clef is clearly a presentation detail, a key signature might be considered both a presentation aspect and a fundamental aspect of the musical syntax.</p>
<p>TODO while we only consider notes as non-meta etc</p>
<p>TODO attributes (same as in Diagrams)</p>
<p>Each attribute value may apply either to a <em>whole</em> score (i.e. from beginning to end), or to a <em>section</em> of the score.</p>
<h2 id="clefs"><a href="#clefs">Clefs</a></h2>
<p>To set the clef for a whole passage, use <a href="/docs/api/Music-Score-Meta.html#v:setClef"><code>setClef</code></a>. The clef is used by most notation backends and ignored by audio backends.</p>
<div class='haskell-music'>



<div class="figure">
<img src="15619c9b3f4e426bx.png" />
</div>
<pre class="sourceCode haskell"><code class="sourceCode haskell"><span class="kw">let</span>
    part1 <span class="fu">=</span> setClef <span class="dt">FClef</span> <span class="fu">$</span> staccato <span class="fu">$</span> scat [c_,g_,c,g_]
    part2 <span class="fu">=</span> setClef <span class="dt">CClef</span> <span class="fu">$</span> staccato <span class="fu">$</span> scat [ab_,eb,d,a]
    part3 <span class="fu">=</span> setClef <span class="dt">GClef</span> <span class="fu">$</span> staccato <span class="fu">$</span> accentLast <span class="fu">$</span> scat [g,fs,e,d]
<span class="kw">in</span> compress <span class="dv">8</span> <span class="fu">$</span> part1 <span class="fu">|&gt;</span> part2 <span class="fu">|&gt;</span> part3</code></pre>
</div>

<p>To set the clef for a preexisting passage in an existing score, use <a href="/docs/api/Music-Score-Meta.html#v:setClefDuring"><code>setClefDuring</code></a>.</p>
<div class='haskell-music'>



<div class="figure">
<img src="2e371040c015a646x.png" />
</div>
<pre class="sourceCode haskell"><code class="sourceCode haskell">setClefDuring (<span class="dv">0</span><span class="fu">.</span><span class="dv">25</span> <span class="ot">&lt;-</span><span class="fu">&gt;</span> <span class="dv">0</span><span class="fu">.</span><span class="dv">5</span>) <span class="dt">CClef</span> <span class="fu">$</span> setClefDuring (<span class="dv">0</span><span class="fu">.</span><span class="dv">75</span> <span class="ot">&lt;-</span><span class="fu">&gt;</span> <span class="dv">1</span>) <span class="dt">FClef</span> <span class="fu">$</span> compress <span class="dv">8</span> <span class="fu">$</span> scat [c_<span class="fu">..</span>c&#39;]</code></pre>
</div>



<h2 id="time-signatures"><a href="#time-signatures">Time signatures</a></h2>
<h2 id="key-signatures"><a href="#key-signatures">Key signatures</a></h2>
<h2 id="rehearsal-marks"><a href="#rehearsal-marks">Rehearsal marks</a></h2>
<h2 id="miscellaneous"><a href="#miscellaneous">Miscellaneous</a></h2>
<h1 id="import-and-export"><a href="#import-and-export">Import and export</a></h1>
<p>The standard distribution (installed as part of <code>music-preludes</code>) of the Music Suite includes a variety of input and output formats. There are also some experimental formats, which are distributed in separate packages, these are marked as experimental below.</p>
<p>The conventions for input or output formats is similar to the convention for properties (TODO ref above): for any type <code>a</code> and format <code>T a</code>, input formats are defined by a class or constraint <code>IsT</code>, and output by a format <code>HasT a</code>. For example, types that can be exported to Lilypond are defined by the constraint <code>HasLilypond a</code>, while types that can be imported from MIDI are defined by the constraint <code>IsMidi a</code>.</p>
<h2 id="midi"><a href="#midi">MIDI</a></h2>
<p>All standard representations support MIDI input and output. The MIDI representation uses <a href="http://hackage.haskell.org/package/HCodecs">HCodecs</a> and the real-time support uses <a href="http://hackage.haskell.org/package/hamid">hamid</a>.</p>
<!--
You can read and write MIDI files using the functions [`readMidi`][readMidi] and [`writeMidi`][writeMidi]. To play MIDI back in real-time, use [`playMidi`][playMidi] or [`playMidiIO`][playMidiIO], which uses [reenact](http://hackage.haskell.org/package/reenact).
-->

<p>Beware that MIDI input may contain time and pitch values that yield a non-readable notation, you need an sophisticated piece of analysis software to convert raw MIDI input to quantized input.</p>
<h2 id="lilypond"><a href="#lilypond">Lilypond</a></h2>
<p>All standard representations support Lilypond output. The <a href="http://hackage.haskell.org/package/lilypond">lilypond</a> package is used for parsing and pretty printing of Lilypond syntax. Lilypond is the recommended way of rendering music.</p>
<p>Lilypond input is not available yet but will hopefully be added soon.</p>
<p>An example:</p>
<pre class="sourceCode haskell"><code class="sourceCode haskell">toLyString <span class="fu">$</span> asScore <span class="fu">$</span> scat [c,d,e]</code></pre>
<pre><code>&lt;&lt;
    \new Staff { &lt;c&#39;&gt;1 &lt;d&#39;&gt;1 &lt;e&#39;&gt;1 }
&gt;&gt;</code></pre>
<h2 id="musicxml"><a href="#musicxml">MusicXML</a></h2>
<p>All standard representations support MusicXML output. The <a href="http://hackage.haskell.org/package/musicxml2">musicxml2</a> package is used for parsing and pretty printing.</p>
<p>The output is fairly complete, with some limitations (<a href="https://github.com/hanshoglund/music-score/issues">reports</a> welcome). There are no plans to support input in the near future.</p>
<p>Beware of the extreme verboseness of XML, for example:</p>
<pre class="sourceCode haskell"><code class="sourceCode haskell">toXmlString <span class="fu">$</span> asScore <span class="fu">$</span> scat [c,d,e]</code></pre>
<pre><code>&lt;?xml version=&#39;1.0&#39; ?&gt;
&lt;score-partwise&gt;
  &lt;movement-title&gt;Title&lt;/movement-title&gt;
  &lt;identification&gt;
    &lt;creator type=&quot;composer&quot;&gt;Composer&lt;/creator&gt;
  &lt;/identification&gt;
  &lt;part-list&gt;
    &lt;score-part id=&quot;P1&quot;&gt;
      &lt;part-name&gt;&lt;/part-name&gt;
    &lt;/score-part&gt;
  &lt;/part-list&gt;
  &lt;part id=&quot;P1&quot;&gt;
    &lt;measure number=&quot;1&quot;&gt;
      &lt;attributes&gt;
        &lt;key&gt;
          &lt;fifths&gt;0&lt;/fifths&gt;
          &lt;mode&gt;major&lt;/mode&gt;
        &lt;/key&gt;
      &lt;/attributes&gt;
      &lt;attributes&gt;
        &lt;divisions&gt;768&lt;/divisions&gt;
      &lt;/attributes&gt;
      &lt;direction&gt;
        &lt;direction-type&gt;
          &lt;metronome&gt;
            &lt;beat-unit&gt;quarter&lt;/beat-unit&gt;
            &lt;per-minute&gt;60&lt;/per-minute&gt;
          &lt;/metronome&gt;
        &lt;/direction-type&gt;
      &lt;/direction&gt;
      &lt;attributes&gt;
        &lt;time symbol=&quot;common&quot;&gt;
          &lt;beats&gt;4&lt;/beats&gt;
          &lt;beat-type&gt;4&lt;/beat-type&gt;
        &lt;/time&gt;
      &lt;/attributes&gt;
      &lt;note&gt;
        &lt;pitch&gt;
          &lt;step&gt;C&lt;/step&gt;
          &lt;alter&gt;0.0&lt;/alter&gt;
          &lt;octave&gt;4&lt;/octave&gt;
        &lt;/pitch&gt;
        &lt;duration&gt;3072&lt;/duration&gt;
        &lt;voice&gt;1&lt;/voice&gt;
        &lt;type&gt;whole&lt;/type&gt;
      &lt;/note&gt;
    &lt;/measure&gt;
    &lt;measure number=&quot;2&quot;&gt;
      &lt;note&gt;
        &lt;pitch&gt;
          &lt;step&gt;D&lt;/step&gt;
          &lt;alter&gt;0.0&lt;/alter&gt;
          &lt;octave&gt;4&lt;/octave&gt;
        &lt;/pitch&gt;
        &lt;duration&gt;3072&lt;/duration&gt;
        &lt;voice&gt;1&lt;/voice&gt;
        &lt;type&gt;whole&lt;/type&gt;
      &lt;/note&gt;
    &lt;/measure&gt;
    &lt;measure number=&quot;3&quot;&gt;
      &lt;note&gt;
        &lt;pitch&gt;
          &lt;step&gt;E&lt;/step&gt;
          &lt;alter&gt;0.0&lt;/alter&gt;
          &lt;octave&gt;4&lt;/octave&gt;
        &lt;/pitch&gt;
        &lt;duration&gt;3072&lt;/duration&gt;
        &lt;voice&gt;1&lt;/voice&gt;
        &lt;type&gt;whole&lt;/type&gt;
      &lt;/note&gt;
    &lt;/measure&gt;
  &lt;/part&gt;
&lt;/score-partwise&gt;</code></pre>
<h2 id="abc-notation"><a href="#abc-notation">ABC Notation</a></h2>
<p>ABC notation (for use with <a href="http://code.google.com/p/abcjs/">abcjs</a> or similar engines) is still experimental.</p>
<h2 id="guido"><a href="#guido">Guido</a></h2>
<p>Guido output (for use with the <a href="http://guidolib.sourceforge.net/">GUIDO engine</a>) is not supported yet. This would be useful, as it allow real-time rendering of scores.</p>
<h2 id="vextab"><a href="#vextab">Vextab</a></h2>
<p>Vextab output (for use with <a href="http://www.vexflow.com/">Vexflow</a>) is not supported yet.</p>
<h2 id="sibelius"><a href="#sibelius">Sibelius</a></h2>
<p>The <a href="http://hackage.haskell.org/package/music-sibelius">music-sibelius</a> package provides experimental import of Sibelius scores (as MusicXML import is <a href="#musicxml">not supported</a>).</p>
<!--
This feature could of course also be used to convert Sibelius scores to other formats such as Guido or ABC without having to write in the ManuScript language used by Sibelius.
-->



<h1 id="customizing-music-representation"><a href="#customizing-music-representation">Customizing music representation</a></h1>
<p>TODO</p>
<h1 id="examples"><a href="#examples">Examples</a></h1>
<p>Some more involved examples:</p>
<h2 id="counterpoint"><a href="#counterpoint">Counterpoint</a></h2>
<div class='haskell-music'>



<div class="figure">
<img src="3147fc3d10ebefd6x.png" />
</div>
<pre class="sourceCode haskell"><code class="sourceCode haskell"><span class="kw">let</span>                      
    subj <span class="fu">=</span> asScore <span class="fu">$</span> scat [ c,       d,        f,          e           ]
    cs1  <span class="fu">=</span> asScore <span class="fu">$</span> scat [ g,f,e,g, f,a,g,d&#39;, c&#39;,b,c&#39;,d&#39;, e&#39;,g&#39;,f&#39;,e&#39; ]
<span class="kw">in</span> compress <span class="dv">4</span> cs1 <span class="fu">&lt;/&gt;</span> subj</code></pre>
</div>

<p>TODO about</p>
<div class='haskell-music'>



<div class="figure">
<img src="509e242376de176ex.png" />
</div>
<pre class="sourceCode haskell"><code class="sourceCode haskell"><span class="kw">let</span> subj <span class="fu">=</span> removeRests <span class="fu">$</span> scat [ 
            scat [rest,c,d,e], 
            f<span class="fu">^*</span><span class="dv">1</span><span class="fu">.</span><span class="dv">5</span>, scat[g,f]<span class="fu">^/</span><span class="dv">4</span>, scat [e,a,d], g<span class="fu">^*</span><span class="dv">1</span><span class="fu">.</span><span class="dv">5</span>,
            scat [a,g,f,e,f,e,d]<span class="fu">^/</span><span class="dv">2</span>, c<span class="fu">^*</span><span class="dv">2</span> 
        ]<span class="fu">^/</span><span class="dv">8</span>

<span class="kw">in</span> (delay <span class="dv">1</span><span class="fu">.</span><span class="dv">5</span> <span class="fu">.</span> up _<span class="dt">P5</span>) subj <span class="fu">&lt;/&gt;</span> subj</code></pre>
</div>

<h2 id="generative-music"><a href="#generative-music">Generative music</a></h2>
<div class='haskell-music'>



<div class="figure">
<img src="6e89c3525b872b20x.png" />
</div>
<pre class="sourceCode haskell"><code class="sourceCode haskell"><span class="kw">let</span>
    row <span class="fu">=</span> <span class="fu">cycle</span> [c,eb,ab,asPitch g]
    mel <span class="fu">=</span> asScore <span class="fu">$</span> scat [d, scat [g,fs]<span class="fu">^/</span><span class="dv">2</span>,bb<span class="fu">^*</span><span class="dv">2</span>]<span class="fu">^/</span><span class="dv">4</span>
<span class="kw">in</span> (<span class="fu">take</span> <span class="dv">25</span> <span class="fu">$</span> row) <span class="ot">`repeated`</span> (\p <span class="ot">-&gt;</span> up (asPitch p <span class="fu">.-.</span> c) mel)</code></pre>
</div>

<h3 id="duo"><a href="#duo">Duo</a></h3>
<div class='haskell-music'>



<div class="figure">
<img src="51f14d14cd881ca6x.png" />
</div>
<pre class="sourceCode haskell"><code class="sourceCode haskell"><span class="kw">let</span>
    toLydian <span class="fu">=</span> modifyPitch (\p <span class="ot">-&gt;</span> <span class="kw">if</span> p <span class="fu">==</span> c <span class="kw">then</span> cs <span class="kw">else</span> p)

    subj1 <span class="fu">=</span> (<span class="fu">^/</span><span class="dv">2</span>) <span class="fu">$</span>
        legato (b_ <span class="fu">|&gt;</span> c) <span class="fu">|&gt;</span> legato (c <span class="fu">|&gt;</span> b_<span class="fu">^*</span><span class="dv">2</span>)
            <span class="fu">|&gt;</span> legato (scat [b_, c, d])
            <span class="fu">|&gt;</span> b_ <span class="fu">|&gt;</span> c <span class="fu">|&gt;</span> b_<span class="fu">^*</span><span class="dv">2</span>
        <span class="fu">|&gt;</span> legato (scat [e, d, b_, c]) <span class="fu">|&gt;</span> b_<span class="fu">^*</span><span class="dv">2</span>
        <span class="fu">|&gt;</span> scat [d, e, b_] <span class="fu">|&gt;</span> c<span class="fu">^*</span><span class="dv">2</span> <span class="fu">|&gt;</span> b_

    pres1 <span class="fu">=</span> subj1<span class="fu">^*</span>(<span class="dv">2</span><span class="fu">/</span><span class="dv">2</span>)
    pres2 <span class="fu">=</span> subj1<span class="fu">^*</span>(<span class="dv">2</span><span class="fu">/</span><span class="dv">2</span>) <span class="fu">&lt;/&gt;</span> delay <span class="dv">2</span> (subj1<span class="fu">^*</span>(<span class="dv">3</span><span class="fu">/</span><span class="dv">2</span>))

    part1 <span class="fu">=</span> pres1 <span class="fu">|&gt;</span> pres2
    part2 <span class="fu">=</span> pres1 <span class="fu">|&gt;</span> pres2

<span class="kw">in</span> dynamics pp <span class="fu">$</span> compress <span class="dv">2</span> <span class="fu">$</span> part1 <span class="fu">|&gt;</span> setClef <span class="dt">CClef</span> (toLydian part2)  </code></pre>
</div>

<!--
### Schubert

```music+haskellx
let
    motive = (legato $ stretchTo 2 $ scat [g,a,bb,c',d',eb']) |> staccato (scat [d', bb, g])
    bar    = rest^*4

    song    = mempty
    left    = times 4 (times 4 $ removeRests $ triplet g)
    right   = removeRests $ times 2 (delay 4 motive |> rest^*3)

    triplet = group 3

    a `x` b = a^*(3/4) |> b^*(1/4)
    a `l` b = (a |> b)^/2

in  stretch (1/4) $ song </> left </> down _P8 right      
```
-->


<h1 id="design-overview"><a href="#design-overview">Design overview</a></h1>
<!--
To develop the Music Suite you need the following tools:

* Pandoc
* Transf
* Hslinks
* Lilypond

Most of these can be installed using `cabal install`.

There is a utility program called `music-util`, which simplifies the kind of cross-package development used throughout the Music Suite. This can be installed in the same manner as the packages, i.e. `cabal install music-util`. See [its documentation][music-util-docs] for an overview of the things it can do.

-->

<p>TODO</p>
<p>The Music Suite consists of a number of packages. These can be divided into two categories:</p>
<ul>
<li><p><em>Music</em> packages that provide classes, types and functions related to a particular aspect of musical representation such as time, pitch, dynamics and so on. The name of these packages always begin with <code>music</code>.</p></li>
<li><p><em>Supporting</em> packages that implement a musical representation (<code>musicxml2</code>, <code>lilypond</code>, <code>abcnotation</code>), or miscellaneous functionality such as cross-platform MIDI support (<code>hamid</code>). These packages can be used as stand-alone packages but are included in the Suite for completeness.</p></li>
</ul>
<p>There is no central package, instead the aim has been to separate the various issues that arise in music representations as clearly as possible. In particular, the <code>music-score</code> package, which provide scores and other temporal containers, does <em>not</em> depend on packages that provide models of musical aspects such as <code>music-pitch</code>, neither do these libraries depend on <code>music-score</code>.</p>
<p>The reason for this is that we want to keep musical structure and content separate. This is a form of the <a href="http://en.wikipedia.org/wiki/Expression_problem">expression problem</a>: if one depended on the other we would either always force the user into a particular form of musical structure, or a particular form of musical material.</p>
<p>However, some packages have special roles:</p>
<ul>
<li><p>The <code>music-pitch-literal</code> and <code>music-dynamics-literal</code> are minimal packages that provide musical <em>literals</em>, i.e. common vocabulary overloaded on result type. This means other packages can import and provide instances for the literals without having to depend on a specific representation.</p></li>
<li><p>The <code>music-preludes</code> provides modules that import modules from both <code>music-score</code> and <code>music-pitch</code> and its sister packages.</p></li>
</ul>
<h3 id="compability-with-other-libraries"><a href="#compability-with-other-libraries">Compability with other libraries</a></h3>
<p>The Music Suite libraries does not profess to be compatible with any other music <em>representation</em> library<sup><a href="#fn1" class="footnoteRef" id="fnref1">1</a></sup>, and deliberately claims the whole <code>Music</code> top-level package. The aim is that functionality from these packages should eventually be included into the Music Suite packages. However it can be used with packages that implement audio processing, synthesis, interaction with musical instruments, FRP libraries and so on.</p>
<p>The concepts and abstractions used in the suite overlap with some fundamental concepts form FRP, but the focus is fundamentally different. While FRP libraries focus on reacting to the external world, the Music Suite focus on modeling temporal values and musical concepts.</p>
<h3 id="acknowledgements"><a href="#acknowledgements">Acknowledgements</a></h3>
<p>The Music Suite is indebted to many other previous libraries and computer music environments, particularly <a href="http://commonmusic.sourceforge.net/">Common Music</a>, <a href="http://cycling74.com/products/max/">Max/MSP</a>, <a href="http://supercollider.sourceforge.net/">SuperCollider</a>, <a href="http://music21-mit.blogspot.se/">music21</a>, <a href="http://guidolib.sourceforge.net/">Guido</a>, <a href="http://lilypond.org/">Lilypond</a> and <a href="https://pypi.python.org/pypi/Abjad/2.3">Abjad</a>. Some of the ideas for the quantization algorithms came from <a href="http://fomus.sourceforge.net/">Fomus</a>.</p>
<p>It obviously ows a lot to the Haskell libraries that it follows including <a href="http://www.haskell.org/haskellwiki/Haskore">Haskore</a>, <a href="http://haskell.cs.yale.edu/euterpea/">Euterpea</a> and <a href="http://hackage.haskell.org/package/temporal-media">temporal-media</a>. The idea of defining a custom internal representation, but relying on standardized formats for input and output comes from <a href="http://johnmacfarlane.net/pandoc/">Pandoc</a>. The idea of splitting the library into a set of packages (and the name) comes from the <a href="https://github.com/haskell-suite">Haskell Suite</a>. The temporal structures, their instances and the concept of denotational design comes from <a href="http://www.haskell.org/haskellwiki/Reactive">Reactive</a> (and its predecessors). <a href="http://projects.haskell.org/diagrams/">Diagrams</a> provided the daring example and some general influences on the design.</p>
<!--
![Modules](module-graph.png)
-->



<!-- Unknown: readMidi No such identifier: readMidi-->

<div class="footnotes">
<hr />
<ol>
<li id="fn1"><p>Including Haskore, Euterpea, hts and temporal-media<a href="#fnref1">↩</a></p></li>
</ol>
</div>
</body>
</html>

